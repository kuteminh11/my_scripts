#!/usr/bin/python
import sys
from pdb import set_trace
import time
import Image

MORSE = { ".-":'A', "-...":'B', "-.-.":'C', "-..":'D', ".":'E',
           "..-.":'F', "--.":'G',  "....":'H', "..":'I',  ".---":'J',
           "-.-":'K',  ".-..":'L', "--":'M',   "-.":'N',  "---":'O',
           ".--.":'P', "--.-":'Q', ".-.":'R',  "...":'S', "-":'T',
           "..-":'U',  "...-":'V', ".--":'W',  "-..-":'X', "-.--":'Y',
           "--..":'Z', '-----':'0', '.----':'1','..---':'2','...--':'3',
           '....-':'4','.....':'5','-....':'6','--...':'7'  , '---..':'8',    
           '----.':'9', '':''  
}

morse_tab = {
        'A': '.-',              'a': '.-',
        'B': '-...',            'b': '-...',
        'C': '-.-.',            'c': '-.-.',
        'D': '-..',             'd': '-..',
        'E': '.',               'e': '.',
        'F': '..-.',            'f': '..-.',
        'G': '--.',             'g': '--.',
        'H': '....',            'h': '....',
        'I': '..',              'i': '..',
        'J': '.---',            'j': '.---',
        'K': '-.-',             'k': '-.-',
        'L': '.-..',            'l': '.-..',
        'M': '--',              'm': '--',
        'N': '-.',              'n': '-.',
        'O': '---',             'o': '---',
        'P': '.--.',            'p': '.--.',
        'Q': '--.-',            'q': '--.-',
        'R': '.-.',             'r': '.-.',
        'S': '...',             's': '...',
        'T': '-',               't': '-',
        'U': '..-',             'u': '..-',
        'V': '...-',            'v': '...-',
        'W': '.--',             'w': '.--',
        'X': '-..-',            'x': '-..-',
        'Y': '-.--',            'y': '-.--',
        'Z': '--..',            'z': '--..',
        '0': '-----',           ',': '--..--',
        '1': '.----',           '.': '.-.-.-',
        '2': '..---',           '?': '..--..',
        '3': '...--',           ';': '-.-.-.',
        '4': '....-',           ':': '---...',
        '5': '.....',           "'": '.----.',
        '6': '-....',           '-': '-....-',
        '7': '--...',           '/': '-..-.',
        '8': '---..',           '(': '-.--.-',
        '9': '----.',           ')': '-.--.-',
        ' ': ' ',               '_': '..--.-',
}

def read_file(path):

	im = Image.open(path)
	pix = im.load()
	width,hight = im.size
	i = 0
	j = 0
	arr = []
	for y in range(hight):
		for x in range(width):
			if pix[x,y]:
				arr.append(chr(i-j))
				j = i
			i += 1
	return arr
		
def parse_morse(input):	
	arr = []
	for a in input:
		arr.append(MORSE[a])
	return arr

def main():
	arr = read_file(sys.argv[1])
	
	arr2 = ''.join(arr).split(' ')
	#print arr2
	text = parse_morse(arr2)
	print ''.join(text)
	#set_trace()
	

if __name__ == '__main__':

	if len(sys.argv) != 2:
	    print "Usage: %s file", sys.argv[0]
	    sys.exit(1)

	main()
